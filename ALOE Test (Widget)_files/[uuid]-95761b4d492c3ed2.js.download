(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5638],{26911:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/widgets/[widgetUuid]/experiences/[uuid]",function(){return n(99398)}])},59854:function(e,t,n){"use strict";n.d(t,{Z:function(){return app_layout}});var r=n(85893),s=n(67294),o=n(6935),l=n(41664),i=n.n(l),a=n(32790),c=n(11163),d=n(78603),navbar=e=>{let{widget:t}=e,n=(0,c.useRouter)();return(0,r.jsxs)("header",{className:"bg-white fixed w-full md:block top-0 z-50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 max-w-7xl mx-auto",children:[(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)(i(),{href:"/app/widgets/".concat(t.uuid),className:"flex items-center space-x-2",children:[(0,r.jsx)(o.bz,{src:t.company.logo,alt:t.company.name,width:"32",height:"32"}),(0,r.jsx)("span",{className:"ml-2 font-semibold",children:t.company.name})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-",children:[(0,r.jsx)(d.Z,{checkout:()=>n.push("/app/stores/".concat(t.store.uid,"/checkout"))}),(0,r.jsx)(a.Ww,{})]})]}),(0,r.jsx)("div",{className:"relative md:absolute md:left-1/2 md:-translate-x-1/2 md:top-2"})]})},u=n(64487);let h=(0,s.createContext)({}),hexToHSL=e=>{if(3===(e=e.replace(/^#/,"")).length&&(e=e.split("").map(e=>e+e).join("")),6!==e.length)return alert("Invalid HEX color. please follow the format: #123456"),"0 0% 0%";let t=parseInt(e,16),n=(t>>16&255)/255,r=(t>>8&255)/255,s=(255&t)/255,o=Math.max(n,r,s),l=Math.min(n,r,s),i=o-l,a=0,c=0,d=(o+l)/2;if(0!==i){switch(c=d>.5?i/(2-o-l):i/(o+l),o){case n:a=((r-s)/i+(r<s?6:0))%6;break;case r:a=(s-n)/i+2;break;case s:a=(n-r)/i+4}a*=60}return a=Math.round(a),c=Math.round(100*c),d=Math.round(100*d),"".concat(a," ").concat(c,"% ").concat(d,"%")},ThemeContextProvider=e=>{let{children:t,company:n}=e,[o,l]=(0,s.useState)({textColor:"#ffffff",primaryColor:"#004225",secondaryColor:"#004225",logo:""});return(0,s.useEffect)(()=>{var e,t,r,s,o,i,a,c;n&&(l({textColor:null!==(o=null===(e=n.theme)||void 0===e?void 0:e.textColor)&&void 0!==o?o:"#ffffff",secondaryColor:null!==(i=null===(t=n.theme)||void 0===t?void 0:t.secondaryColor)&&void 0!==i?i:"#E5ECE8",primaryColor:null!==(a=null===(r=n.theme)||void 0===r?void 0:r.primaryColor)&&void 0!==a?a:"#000000",logo:null!==(c=n.logo)&&void 0!==c?c:"/logo.webp",googleAnalyticsId:null===(s=n.theme)||void 0===s?void 0:s.googleAnalyticsId}),u.YA("company_id",n.id))},[n]),(0,s.useEffect)(()=>{document.documentElement.style.setProperty("--primary",hexToHSL(o.primaryColor)),document.documentElement.style.setProperty("--accent",hexToHSL(o.secondaryColor)),document.documentElement.style.setProperty("--primary-foreground",hexToHSL(o.textColor))},[o]),(0,r.jsx)(h.Provider,{value:{theme:o},children:t})};var contexts_useTheme=()=>(0,s.useContext)(h),m=n(4298),x=n.n(m),p=n(50432);let AppLayout=e=>{let{children:t,widget:n}=e,{theme:s}=contexts_useTheme();return(0,r.jsxs)(r.Fragment,{children:[(null==s?void 0:s.googleAnalyticsId)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x(),{strategy:"lazyOnload",src:"https://www.googletagmanager.com/gtag/js?id=".concat(s.googleAnalyticsId)}),(0,r.jsx)(x(),{strategy:"lazyOnload",id:"googel_analytics",dangerouslySetInnerHTML:{__html:"\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('config', '".concat(s.googleAnalyticsId,"', {\n              page_path: window.location.pathname,\n            });\n          ")}})]}):null,(0,r.jsx)(p.GN,{children:(0,r.jsxs)("section",{className:"h-screen pt-36 md:pt-24 flex flex-col justify-between",children:[n&&(0,r.jsx)(navbar,{widget:n}),(0,r.jsx)("div",{className:"px-4 max-w-7xl mx-auto w-full md:mb-12",children:t})]})})]})};var app_layout=e=>{let{children:t,widget:n,company:s}=e;return(0,r.jsx)(ThemeContextProvider,{company:null!=s?s:n.company,children:(0,r.jsx)(AppLayout,{widget:n,children:t})})}},78603:function(e,t,n){"use strict";var r=n(85893);n(67294);var s=n(11522),o=n(63079),l=n(9663),i=n(50432),a=n(69539),c=n(64901),d=n(97121),u=n(54116),h=n(23867),m=n(78187),x=n(60150),p=n(60408),f=n(14998);t.Z=e=>{var t,n,g;let{checkout:w,size:j="icon"}=e,{t:v}=(0,c.$G)("experience"),{masterOrder:y,isDrawerOpen:b,setDrawerOpen:C,totalAmount:N}=(0,i.ZP)(),{drawerRef:_,drawerHeight:E}=(0,f.N)();return(0,r.jsxs)(o.yo,{open:b,onOpenChange:C,children:[(0,r.jsx)(o.aM,{asChild:!0,children:(0,r.jsxs)(l.z,{size:j,variant:"icon"===j?"ghost":"default",className:"relative",onClick:()=>(0,p.B5)(),children:["icon"===j?(0,r.jsx)(a.Z,{size:16}):(0,r.jsx)("span",{children:v("view_cart")}),(null==y?void 0:null===(t=y.orders)||void 0===t?void 0:t.length)?(0,r.jsx)(s.C,{className:"rounded-full absolute w-4 h-4 justify-center px-1 top-1 -right-1",variant:"icon"===j?"default":"secondary",children:y.orders.length}):null]})}),(0,r.jsxs)(o.ue,{ref:_,className:"max-w-full w-full md:max-w-[480px] flex flex-col",style:{height:E+"px"},children:[(0,r.jsx)(o.Tu,{children:(0,r.jsx)(o.bC,{children:v("cart",{ns:"common"})})}),(null==y?void 0:null===(n=y.orders)||void 0===n?void 0:n.length)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex-1 overflow-y-auto pb-4",children:(0,r.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,r.jsx)(m.Z,{}),null==y?void 0:null===(g=y.orders)||void 0===g?void 0:g.map(e=>(0,r.jsx)(x.Z,{order:e,removable:!0},e.id))]})}),(0,r.jsxs)("div",{className:"pt-4 mt-auto sticky bottom-0 bg-background",children:[(0,r.jsx)(d.Z,{className:"mb-4"}),(0,r.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,r.jsx)("strong",{className:"font-semibold text-lg",children:v("total_price")}),(0,r.jsx)("span",{children:y.orders.length>0&&N<.01?v("common:free"):(0,u.T4)(N)})]}),(0,r.jsx)(l.z,{className:"w-full uppercase",onClick:w,children:v(N<.01?"common:book":"common:proceed_to_payment")})]})]}):(0,r.jsx)(h.Z,{})]})]})}},22010:function(e,t,n){"use strict";n.d(t,{F:function(){return ExperienceBookingSheet}});var r=n(85893),s=n(9663),o=n(64901),l=n(98711),i=n(63079),a=n(39332),c=n(60408),d=n(14998);function ExperienceBookingSheet(e){let{storeId:t,experience:n,sellerId:u,bookable:h=!0}=e,{t:m}=(0,o.$G)("experience"),x=(0,a.useRouter)(),{drawerRef:p,drawerHeight:f}=(0,d.N)();return(0,r.jsxs)(i.yo,{children:[(0,r.jsx)(i.aM,{asChild:!0,children:(0,r.jsx)(s.z,{onClick:()=>(0,c.B5)(!0),children:m("book_now")})}),(0,r.jsxs)(i.ue,{className:"max-w-full w-full md:max-w-[480px] flex flex-col",style:{height:f+"px"},ref:p,children:[(0,r.jsx)(i.Tu,{children:(0,r.jsx)(i.bC,{children:n.name})}),(0,r.jsx)(l.Z,{experience:n,sellerId:u,bookable:h,afterSubmit:()=>{x.push("/app/stores/".concat(t,"/checkout"))}})]})]})}},14998:function(e,t,n){"use strict";n.d(t,{N:function(){return useIframeDrawer}});var r=n(60408),s=n(67294);function useIframeDrawer(){let[e,t]=(0,s.useState)(0),n=(0,s.useRef)(null);return(0,s.useEffect)(()=>{async function updateCartHeight(){try{let e=await (0,r._z)(),s=e.windowInnerHeight||window.innerHeight;t(s),n.current&&(n.current.style.height="".concat(s,"px"))}catch(t){let e=window.innerHeight;n.current&&(n.current.style.height="".concat(e,"px"))}}updateCartHeight();let handleResize=()=>{updateCartHeight()};return window.addEventListener("resize",handleResize),()=>window.removeEventListener("resize",handleResize)},[]),{drawerRef:n,drawerHeight:e}}},99398:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return x},default:function(){return AppExperiencePage}});var r=n(85893),s=n(67294),o=n(7936),l=n(59854),i=n(9008),a=n.n(i),c=n(50432),d=n(85518),u=n(55156),h=n(22010),m=n(85779),x=!0;function AppExperiencePage(e){let{experience:t,widget:n}=e,{idempotency:l}=(0,c.ZP)();return(0,s.useEffect)(()=>{l&&t&&o.D.visit(t.uuid,l,d.tq)},[l,t]),(0,s.useEffect)(()=>{let sendHeight=()=>{let e=document.documentElement.scrollHeight;window.parent.postMessage({iframeHeight:e},"*")};return window.parent.postMessage({iframeHeight:0},"*"),sendHeight(),window.addEventListener("resize",sendHeight),()=>{window.removeEventListener("resize",sendHeight)}},[]),(0,r.jsxs)("div",{children:[(0,r.jsx)(a(),{children:(0,r.jsxs)("title",{children:["Aloesuite - ",t.name]})}),(0,r.jsx)(m.Z,{experience:t,sellerId:n.company.id,storeId:n.store.uid}),(0,r.jsxs)("div",{className:"md:hidden sticky bottom-0 bg-white w-full flex justify-between items-center py-4 border-t",children:[(0,r.jsx)("div",{children:(0,r.jsx)(u.Z,{experience:t})}),(0,r.jsx)(h.F,{experience:t,sellerId:n.company.id,storeId:n.store.uid})]})]})}AppExperiencePage.getLayout=function(e){return(0,r.jsx)(l.Z,{widget:e.props.widget,children:e})}}},function(e){e.O(0,[7914,6935,4875,599,5708,4236,1619,401,5779,9774,2888,179],function(){return e(e.s=26911)}),_N_E=e.O()}]);