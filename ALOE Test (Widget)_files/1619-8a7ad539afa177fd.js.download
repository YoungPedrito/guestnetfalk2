"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1619],{78187:function(e,t,n){var s=n(85893),i=n(50432),r=n(1590),a=n(67294),l=n(64901),c=n(45077);t.Z=()=>{let{masterOrder:e,removeOrder:t}=(0,i.ZP)(),[n,o]=(0,a.useState)(),{t:d}=(0,l.$G)("experience");return((0,a.useEffect)(()=>{var n;if(!(null==e?void 0:null===(n=e.orders)||void 0===n?void 0:n[0]))return;function formatSecondsToMinutes(e){return"".concat(String(Math.floor(e/60)).padStart(2,"0"),":").concat(String(e%60).padStart(2,"0"))}let s=setInterval(()=>{var n,s;let i=1800-(0,r.Z)(new Date,new Date(null==e?void 0:null===(n=e.orders)||void 0===n?void 0:n[0].createdAtISO));i<=0&&t(null==e?void 0:null===(s=e.orders)||void 0===s?void 0:s[0].id),o(formatSecondsToMinutes(i))},1e3);return()=>clearInterval(s)},[null==e?void 0:e.orders,t]),n)?(0,s.jsxs)("div",{className:"bg-stone-100 py-1 px-2 rounded-md flex items-center space-x-2 text-sm",children:[(0,s.jsx)(c.Z,{size:16}),(0,s.jsx)("span",{children:d("time_left")}),(0,s.jsx)("strong",{className:"text-primary ml-1",children:n})]}):null}},23867:function(e,t,n){var s=n(85893),i=n(24958);n(67294);var r=n(64901),a=n(11163),l=n(50432);t.Z=()=>{let{t:e}=(0,r.$G)("experience");(0,a.useRouter)();let{setDrawerOpen:t}=(0,l.ZP)();return(0,s.jsxs)("div",{className:"text-center space-y-2 mt-64",children:[(0,s.jsx)(i.Z,{className:"mx-auto"}),(0,s.jsx)("h3",{children:e("cart_empty",{ns:"common"})}),(0,s.jsx)("p",{children:e("cart_empty_description",{ns:"common"})})]})}},48953:function(e,t,n){var s=n(85893),i=n(13441),r=n(64901);n(67294);let a={scheduled:"text-success",ongoing:"text-success",delayed:"text-danger",completed:"text-stone-400",canceled:"text-danger",waiting_confirmation:"text-warning"};t.Z=e=>{let{order:t}=e,{t:n}=(0,r.$G)("order");return(0,s.jsx)("div",{className:(0,i.cn)("text-sm capitalize space-x-1 "+a[t.status]),children:(0,s.jsx)("span",{children:n("status."+t.status)})})}},60150:function(e,t,n){n.d(t,{Z:function(){return checkout_item}});var s=n(85893),i=n(54116),r=n(34695),a=n(6935),l=n(67294),c=n(64901),o=n(9663),d=n(13718),u=n(34958),m=n(50432),x=n(334);let h=x.fC,p=x.wy,g=x.Fw;var f=n(48953),checkout_item=e=>{var t;let{order:n,removable:x=!1}=e,{t:v}=(0,c.$G)("experience"),[w,j]=l.useState(!1),{removeOrder:N}=(0,m.ZP)();return(0,s.jsx)(h,{open:w,onOpenChange:j,className:"space-y-2",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{children:(0,s.jsx)(a.bz,{src:null===(t=n.experience.images)||void 0===t?void 0:t[0],width:100,height:100,alt:n.experience.name,crop:"thumb",className:"rounded-md aspect-square"})}),(0,s.jsxs)("div",{className:"space-y-1 pl-4 text-sm w-full",children:[(0,s.jsxs)("h3",{className:"mb-4 flex w-full justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsxs)("div",{className:"font-semibold flex space-x-2",children:[(0,s.jsx)("span",{className:"",children:n.experience.name}),(0,s.jsx)("span",{className:"text-xs",children:n.status!==r.iF.Cart&&(0,s.jsx)(f.Z,{order:n})})]}),x&&(0,s.jsx)("span",{children:n.amount<.01?v("common:free"):(0,i.T4)(n.amount)})]}),x?(0,s.jsx)(o.z,{type:"button",variant:"ghost",size:"icon",className:"rounded-full",onClick:()=>N(n.id),children:(0,s.jsx)(d.Z,{})}):(0,s.jsx)("span",{children:n.amount<.01?v("common:free"):(0,i.T4)(n.amount)})]}),(0,s.jsx)(p,{asChild:!0,children:(0,s.jsxs)(o.z,{variant:"ghost",size:"sm",className:"flex justify-between w-full",children:[(0,s.jsx)("span",{children:v("booking_details")}),(0,s.jsx)(u.Z,{className:"h-4 w-4"})]})}),(0,s.jsxs)(g,{className:"space-y-2 px-3 text-xs",children:[(0,s.jsxs)("div",{className:"flex space-x-2 justify-between",children:[(0,s.jsxs)("strong",{children:[v("starts_at"),":"]}),(0,s.jsx)("span",{children:(0,i.p6)(n.startsAt)})]}),(0,s.jsxs)("div",{className:"flex space-x-2 justify-between",children:[(0,s.jsxs)("strong",{children:[v("ends_at"),":"]}),(0,s.jsx)("span",{children:(0,i.p6)(n.endsAt)})]}),(0,s.jsxs)("div",{className:"flex space-x-2 justify-between",children:[(0,s.jsxs)("strong",{children:[v("option"),":"]}),(0,s.jsx)("span",{children:n.optionName})]}),(0,s.jsxs)("div",{className:"flex space-x-2 justify-between",children:[(0,s.jsxs)("strong",{children:[v("units"),":"]}),(0,s.jsx)("div",{children:n.items.map(e=>(0,s.jsxs)("div",{children:[e.name," x ",e.quantity]},e.id))})]}),n.pickupPoint&&(0,s.jsxs)("div",{className:"space-y-2 justify-between",children:[(0,s.jsxs)("strong",{children:[v("meeting_and_pickup"),":"]}),(0,s.jsx)("div",{children:n.pickupPoint.formattedAddress})]})]})]})]})})}},60408:function(e,t,n){n.d(t,{B5:function(){return scrollParentToTop},Jh:function(){return isEmail},Kj:function(){return getExperiencePriceRange},PQ:function(){return isFreeExperience},_z:function(){return getParentScreenHeight},uv:function(){return getSeasonalPrice}});var s=n(6009),i=n(43343);let getSeasonalPrice=(e,t)=>{if(!e)return 0;if(!t)return e.retailRate;let n=null==e?void 0:e.seasonalPrices.find(e=>{let n=(0,i.Z)(e.startsAt,t.getFullYear()),r=(0,i.Z)(e.endsAt,t.getFullYear());return(0,s.Z)(t,{start:n,end:r})});return n?n.retailRate:e.retailRate},getExperiencePriceRange=e=>{var t;let n=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,i,r=null,a=!0;return(null===(t=e.options)||void 0===t||t.forEach(e=>{var t;null===(t=e.prices)||void 0===t||t.forEach(e=>{var t;e.isFree||e.isExtra||(a=!1,e.retailRate<n&&(n=e.retailRate,i=e.unitName),e.retailRate>s&&(s=e.retailRate,r=e.unitName),null===(t=e.seasonalPrices)||void 0===t||t.forEach(t=>{t.retailRate<n&&(n=t.retailRate,i=e.unitName),t.retailRate>s&&(s=t.retailRate,r=e.unitName)}))})}),a)?{min:0,max:0,maxUnit:r,minUnit:i,isAllFree:a}:{min:null!=n?n:0,max:null!=s?s:0,maxUnit:r,minUnit:i,isAllFree:a}};function isEmail(e){return RegExp("^[0-9a-z._-]+@{1}[0-9a-z.-]{2,}[.]{1}[a-z]{2,5}$","i").test(e)}function isFreeExperience(e){return e.options.every(e=>e.prices.every(e=>e.isFree))}let scrollParentToTop=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(window.parent&&window.parent!==window)try{window.parent.postMessage({type:"aloe-scroll-top",instant:e},"*")}catch(e){console.error("Failed to send scroll message to parent",e)}},getParentScreenHeight=()=>new Promise(e=>{if(window.parent&&window.parent!==window){let messageHandler=t=>{"aloe-screen-height"===t.data.type&&(window.removeEventListener("message",messageHandler),e(t.data.screenHeights))};window.addEventListener("message",messageHandler);try{window.parent.postMessage({type:"aloe-request-screen-height"},"*")}catch(t){console.error("Failed to request screen height from parent",t),e({windowInnerHeight:window.innerHeight,documentClientHeight:document.documentElement.clientHeight,screenHeight:window.screen.height,screenAvailHeight:window.screen.availHeight,bodyClientHeight:document.body.clientHeight})}}else e({windowInnerHeight:window.innerHeight,documentClientHeight:document.documentElement.clientHeight,screenHeight:window.screen.height,screenAvailHeight:window.screen.availHeight,bodyClientHeight:document.body.clientHeight})})}}]);